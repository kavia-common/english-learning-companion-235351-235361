{"is_source_file": true, "format": "JavaScript", "description": "This source file initializes a PostgreSQL database connection pool using the 'pg' library, attempts to derive the database connection URL from a configuration file or environment variable, and exposes functions for executing queries and closing the connection pool.", "external_files": ["fs", "path", "pg"], "external_methods": ["fs.existsSync", "fs.readFileSync", "path.resolve"], "published": ["pool", "query", "closePool"], "classes": [], "methods": [{"name": "getDatabaseUrlFromDbConnectionTxt()", "description": "Attempts to read a PostgreSQL connection string from a text file located at specific candidate paths, matching a 'postgresql://' URL pattern.", "scope": "", "scopeKind": ""}, {"name": "query(text, params = [])", "description": "Executes a parameterized SQL query using the shared connection pool.", "scope": "", "scopeKind": ""}, {"name": "closePool()", "description": "Closes the database connection pool gracefully, useful for tests or shutdown procedures.", "scope": "", "scopeKind": ""}], "calls": ["path.resolve", "fs.existsSync", "fs.readFileSync", "String.match", "pool.query", "pool.end"], "search-terms": ["PostgreSQL connection pool", "db_connection.txt parsing", "pg Pool usage", "database connection string", "index.js database"], "state": 2, "file_id": 13, "knowledge_revision": 104, "git_revision": "", "revision_history": [{"31": ""}, {"73": ""}, {"80": ""}, {"104": ""}], "ctags": [{"_type": "tag", "name": "closePool", "path": "/home/kavia/workspace/code-generation/english-learning-companion-235351-235361/backend/src/db/index.js", "pattern": "/^async function closePool() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/code-generation/english-learning-companion-235351-235361/backend/src/db/index.js", "pattern": "/^const fs = require('fs');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getDatabaseUrlFromDbConnectionTxt", "path": "/home/kavia/workspace/code-generation/english-learning-companion-235351-235361/backend/src/db/index.js", "pattern": "/^function getDatabaseUrlFromDbConnectionTxt() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/english-learning-companion-235351-235361/backend/src/db/index.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "pool", "path": "/home/kavia/workspace/code-generation/english-learning-companion-235351-235361/backend/src/db/index.js", "pattern": "/^  pool,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "pool", "path": "/home/kavia/workspace/code-generation/english-learning-companion-235351-235361/backend/src/db/index.js", "pattern": "/^const pool = new Pool({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/english-learning-companion-235351-235361/backend/src/db/index.js", "pattern": "/^async function query(text, params = []) {$/", "language": "JavaScript", "kind": "function", "signature": "(text, params = [])"}, {"_type": "tag", "name": "resolvedDatabaseUrl", "path": "/home/kavia/workspace/code-generation/english-learning-companion-235351-235361/backend/src/db/index.js", "pattern": "/^const resolvedDatabaseUrl = process.env.DATABASE_URL || getDatabaseUrlFromDbConnectionTxt();$/", "language": "JavaScript", "kind": "constant"}], "hash": "fcd969424a0fa25718885ab214660eb6", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/db/index.js", "fields": [{"name": "pool,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}]}